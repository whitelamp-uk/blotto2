

-- ADMIN ROLE

CREATE ROLE IF NOT EXISTS
  '{{BLOTTO_ADMIN_USER}}'
;

GRANT SELECT
ON `{{BLOTTO_TICKET_DB}}`.*
TO '{{BLOTTO_ADMIN_USER}}'
;

GRANT SELECT
ON `{{BLOTTO_DB}}`.*
TO '{{BLOTTO_ADMIN_USER}}'
;

GRANT SELECT
ON `mysql`.`proc`
TO '{{BLOTTO_ADMIN_USER}}'
;

GRANT EXECUTE
ON PROCEDURE `{{BLOTTO_DB}}`.`help`
TO '{{BLOTTO_ADMIN_USER}}'
;

GRANT EXECUTE
ON PROCEDURE `{{BLOTTO_DB}}`.`mandatesHavingNoSupporter`
TO '{{BLOTTO_ADMIN_USER}}'
;

GRANT EXECUTE
ON PROCEDURE `{{BLOTTO_DB}}`.`supportersHavingNoMandate`
TO '{{BLOTTO_ADMIN_USER}}'
;



-- ORGANISATION ROLE AND TEST USER


CREATE USER IF NOT EXISTS
  '{{BLOTTO_ORG_USER}}'@'localhost'
;

CREATE ROLE IF NOT EXISTS
  '{{BLOTTO_ORG_USER}}'
;

GRANT '{{BLOTTO_ORG_USER}}'
TO '{{BLOTTO_ORG_USER}}'@'localhost'
;

SET DEFAULT ROLE '{{BLOTTO_ORG_USER}}'
FOR '{{BLOTTO_ORG_USER}}'@'localhost'
;



